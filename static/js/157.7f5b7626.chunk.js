(this["webpackJsonpfuse-react-app"]=this["webpackJsonpfuse-react-app"]||[]).push([[157],{2647:function(e,t,a){"use strict";a.r(t);var n=a(14),r=a(1100),c=a(1088),i=a(616),l=a(193),s=a(134),o=a(3),d=a(1115),u=a(0),b=a(7),p=a(2451),j=a(1370),m=a(1473),f=a(1475),v=a(1031),x=a(1097),g=a(1096),O=a(31),h=a(164),y=a.n(h),k=a(1),w=Object(i.a)((function(e){return{root:{backgroundImage:'url("../../assets/images/backgrounds/header-bg.png")',backgroundColor:"#FAFAFA",color:"#FFFFFF",backgroundSize:"cover",backgroundPosition:"0 50%",backgroundRepeat:"no-repeat","&:before":{content:"''",position:"absolute",top:0,right:0,bottom:0,left:0,zIndex:1,background:"rgba(0, 0, 0, 0.45)"},"&.Jan":{backgroundImage:"url('/assets/images/calendar/winter.jpg')",backgroundPosition:"0 85%"},"&.Feb":{backgroundImage:"url('/assets/images/calendar/winter.jpg')",backgroundPosition:"0 85%"},"&.Mar":{backgroundImage:"url('/assets/images/calendar/spring.jpg')",backgroundPosition:"0 40%"},"&.Apr":{backgroundImage:"url('/assets/images/calendar/spring.jpg')",backgroundPosition:"0 40%"},"&.May":{backgroundImage:"url('/assets/images/calendar/spring.jpg')",backgroundPosition:"0 40%"},"&.Jun":{backgroundImage:"url('/assets/images/calendar/summer.jpg')",backgroundPosition:"0 80%"},"&.Jul":{backgroundImage:"url('/assets/images/calendar/summer.jpg')",backgroundPosition:"0 80%"},"&.Aug":{backgroundImage:"url('/assets/images/calendar/summer.jpg')",backgroundPosition:"0 80%"},"&.Sep":{backgroundImage:"url('/assets/images/calendar/autumn.jpg')",backgroundPosition:"0 40%"},"&.Oct":{backgroundImage:"url('/assets/images/calendar/autumn.jpg')",backgroundPosition:"0 40%"},"&.Nov":{backgroundImage:"url('/assets/images/calendar/autumn.jpg')",backgroundPosition:"0 40%"},"&.Dec":{backgroundImage:"url('/assets/images/calendar/winter.jpg')",backgroundPosition:"0 85%"}}}})),D={dayGridMonth:{title:"Month",icon:"view_module"},timeGridWeek:{title:"Week",icon:"view_week"},timeGridDay:{title:"Day",icon:"view_agenda"}};var N,E=function(e){var t=e.calendarRef,a=e.currentDate,r=w(e),i=Object(b.d)(O.f),s=function(){var e;return null===(e=t.current)||void 0===e?void 0:e.getApi()};return Object(k.jsx)(x.a,{theme:i,children:Object(k.jsx)("div",{className:Object(o.a)(r.root,"flex h-200 min-h-200 relative",y()(new Date((null===a||void 0===a?void 0:a.start)||null),"MMM")),children:Object(k.jsxs)("div",{className:"flex flex-1 flex-col p-12 justify-between z-10 container",children:[Object(k.jsxs)("div",{className:"flex flex-col items-center justify-between sm:flex-row",children:[Object(k.jsxs)("div",{className:"flex items-center my-16 sm:mb-0",children:[Object(k.jsx)(c.a,{component:d.a.span,initial:{scale:0},animate:{scale:1,transition:{delay:.2}},className:"text-24 md:text-32",children:"today"}),Object(k.jsx)(d.a.span,{initial:{x:-20},animate:{x:0,transition:{delay:.2}},delay:300,className:"text-16 md:text-24 mx-12 font-semibold",children:"Calendar"})]}),Object(k.jsxs)("div",{className:"flex items-center",children:[Object(k.jsx)(g.a,{title:"Today",children:Object(k.jsx)("div",{children:Object(k.jsx)(d.a.div,{initial:{scale:0},animate:{scale:1,transition:{delay:.3}},children:Object(k.jsx)(v.a,{"aria-label":"today",onClick:function(){return s().today()},children:Object(k.jsx)(c.a,{children:"today"})})})})}),Object.entries(D).map((function(e){var t=Object(n.a)(e,2),r=t[0],i=t[1];return Object(k.jsx)(g.a,{title:i.title,children:Object(k.jsx)("div",{children:Object(k.jsx)(d.a.div,{initial:{scale:0},animate:{scale:1,transition:{delay:.3}},children:Object(k.jsx)(v.a,{"aria-label":r,onClick:function(){return s().changeView(r)},disabled:(null===a||void 0===a?void 0:a.view.type)===r,children:Object(k.jsx)(c.a,{children:i.icon})})})})},r)}))]})]}),Object(k.jsxs)(d.a.div,{className:"flex items-center justify-center",initial:{opacity:0},animate:{opacity:1,transition:{delay:.3}},children:[Object(k.jsx)(g.a,{title:"Previous",children:Object(k.jsx)(v.a,{"aria-label":"Previous",onClick:function(){return s().prev()},children:Object(k.jsx)(c.a,{children:"ltr"===i.direction?"chevron_left":"chevron_right"})})}),Object(k.jsx)(l.a,{variant:"h6",children:null===a||void 0===a?void 0:a.view.title}),Object(k.jsx)(g.a,{title:"Next",children:Object(k.jsx)(v.a,{"aria-label":"Next",onClick:function(){return s().next()},children:Object(k.jsx)(c.a,{children:"ltr"===i.direction?"chevron_right":"chevron_left"})})})]})]})})})},I=a(6),P=a(132),C=a(400),A=a.n(C),F=a(36),S=a(232),M=a(1098),R=a(1095),V=a(1083),W=a(1189),_=a(1187),G=a(1092),T=a(1093),J=a(1094),z=a(1099),B=a(1303),q=a(59),U=a(11),H=a(27),L=a(16),Y=a.n(L),K=a(35),Q=a(19),X=a(49),Z=a.n(X),$=Object(Q.b)("calendarApp/events/getEvents",Object(K.a)(Y.a.mark((function e(){var t,a;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.a.get("/api/calendar-app/events");case 2:return t=e.sent,e.next=5,t.data;case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))),ee=Object(Q.b)("calendarApp/events/addEvent",function(){var e=Object(K.a)(Y.a.mark((function e(t,a){var n,r;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.dispatch,e.next=3,Z.a.post("/api/calendar-app/add-event",{newEvent:t});case 3:return n=e.sent,e.next=6,n.data;case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),te=Object(Q.b)("calendarApp/events/updateEvent",function(){var e=Object(K.a)(Y.a.mark((function e(t,a){var n,r;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.dispatch,e.next=3,Z.a.post("/api/calendar-app/update-event",{event:t});case 3:return n=e.sent,e.next=6,n.data;case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),ae=Object(Q.b)("calendarApp/events/remove-event",function(){var e=Object(K.a)(Y.a.mark((function e(t,a){var n,r;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.dispatch,e.next=3,Z.a.post("/api/calendar-app/remove-event",{eventId:t});case 3:return n=e.sent,e.next=6,n.data;case 6:return r=e.sent,e.abrupt("return",r.id);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),ne=Object(Q.c)({}),re=ne.getSelectors((function(e){return e.calendarApp.events})),ce=re.selectAll,ie=(re.selectIds,re.selectById,Object(Q.d)({name:"calendarApp/events",initialState:ne.getInitialState({eventDialog:{type:"new",props:{open:!1},data:null}}),reducers:{openNewEventDialog:{prepare:function(e){return{payload:{type:"new",props:{open:!0},data:{start:A()(e.start),end:A()(e.end)}}}},reducer:function(e,t){e.eventDialog=t.payload}},openEditEventDialog:{prepare:function(e){return{payload:{type:"edit",props:{open:!0},data:Object(I.a)(Object(I.a)({},e),{},{start:A()(e.start),end:A()(e.end)})}}},reducer:function(e,t){e.eventDialog=t.payload}},closeNewEventDialog:function(e,t){e.eventDialog={type:"new",props:{open:!1},data:null}},closeEditEventDialog:function(e,t){e.eventDialog={type:"edit",props:{open:!1},data:null}}},extraReducers:(N={},Object(H.a)(N,$.fulfilled,ne.setAll),Object(H.a)(N,ee.fulfilled,ne.addOne),Object(H.a)(N,te.fulfilled,ne.upsertOne),Object(H.a)(N,ae.fulfilled,ne.removeOne),N)})),le=ie.actions,se=le.openNewEventDialog,oe=le.closeNewEventDialog,de=le.openEditEventDialog,ue=le.closeEditEventDialog,be=ie.reducer,pe={id:S.a.generateGUID(),title:"",allDay:!0,start:A()(new Date),end:A()(new Date),extendedProps:{desc:""}},je=q.d().shape({title:q.f().required("You must enter a title")});var me=function(e){var t=Object(b.c)(),a=Object(b.d)((function(e){return e.calendarApp.events.eventDialog})),n=Object(F.f)({defaultValues:pe,mode:"onChange",resolver:Object(P.a)(je)}),r=n.reset,i=n.formState,s=n.watch,o=n.control,d=(n.getValues,n.handleSubmit),p=i.isValid,j=i.dirtyFields,m=i.errors,f=s("start"),x=s("end"),g=s("id"),O=Object(u.useCallback)((function(){"edit"===a.type&&a.data&&r(Object(I.a)({},a.data)),"new"===a.type&&r(Object(I.a)(Object(I.a)(Object(I.a)({},pe),a.data),{},{id:S.a.generateGUID()}))}),[a.data,a.type,r]);function h(){return"edit"===a.type?t(ue()):t(oe())}return Object(u.useEffect)((function(){a.props.open&&O()}),[a.props.open,O]),Object(k.jsxs)(V.a,Object(I.a)(Object(I.a)({},a.props),{},{onClose:h,fullWidth:!0,maxWidth:"xs",component:"form",children:[Object(k.jsx)(M.a,{position:"static",elevation:0,children:Object(k.jsx)(z.a,{className:"flex w-full",children:Object(k.jsx)(l.a,{variant:"subtitle1",color:"inherit",children:"new"===a.type?"New Event":"Edit Event"})})}),Object(k.jsxs)("form",{noValidate:!0,onSubmit:d((function(e){"new"===a.type?t(ee(e)):t(te(Object(I.a)(Object(I.a)({},a.data),e))),h()})),children:[Object(k.jsxs)(_.a,{classes:{root:"p-16 pb-0 sm:p-24 sm:pb-0"},children:[Object(k.jsx)(F.a,{name:"title",control:o,render:function(e){var t,a=e.field;return Object(k.jsx)(J.a,Object(I.a)(Object(I.a)({},a),{},{id:"title",label:"Title",className:"mt-8 mb-16",error:!!m.title,helperText:null===m||void 0===m||null===(t=m.title)||void 0===t?void 0:t.message,InputLabelProps:{shrink:!0},variant:"outlined",autoFocus:!0,required:!0,fullWidth:!0}))}}),Object(k.jsx)(F.a,{name:"allDay",control:o,render:function(e){var t=e.field,a=t.onChange,n=t.value;return Object(k.jsx)(G.a,{className:"mt-8 mb-16",label:"All Day",control:Object(k.jsx)(T.a,{onChange:function(e){a(e.target.checked)},checked:n,name:"allDay"})})}}),Object(k.jsx)(F.a,{name:"start",control:o,defaultValue:"",render:function(e){var t=e.field;t.onChange,t.value;return Object(k.jsx)(B.a,{label:"Start",inputVariant:"outlined",className:"mt-8 mb-16 w-full",maxDate:x})}}),Object(k.jsx)(F.a,{name:"end",control:o,defaultValue:"",render:function(e){var t=e.field,a=t.onChange,n=t.value;return Object(k.jsx)(B.a,{label:"End",inputVariant:"outlined",value:n,onChange:a,className:"mt-8 mb-16 w-full",minDate:f})}}),Object(k.jsx)(F.a,{name:"extendedProps.desc",control:o,render:function(e){var t=e.field;return Object(k.jsx)(J.a,Object(I.a)(Object(I.a)({},t),{},{className:"mt-8 mb-16",id:"desc",label:"Description",type:"text",multiline:!0,rows:5,variant:"outlined",fullWidth:!0}))}})]}),"new"===a.type?Object(k.jsx)(W.a,{className:"justify-between px-8 sm:px-16 pb-16",children:Object(k.jsx)(R.a,{variant:"contained",color:"primary",type:"submit",disabled:U.a.isEmpty(j)||!p,children:"Add"})}):Object(k.jsxs)(W.a,{className:"justify-between px-8 sm:px-16 pb-16",children:[Object(k.jsx)(R.a,{variant:"contained",color:"primary",type:"submit",disabled:U.a.isEmpty(j)||!p,children:"Save"}),Object(k.jsx)(v.a,{onClick:function(){t(ae(g)),h()},children:Object(k.jsx)(c.a,{children:"delete"})})]})]})]}))},fe=a(110),ve=Object(fe.c)({events:be}),xe=Object(i.a)((function(e){return{root:{"& a":{color:e.palette.text.primary,textDecoration:"normal!important"},"&  .fc-media-screen":{minHeight:"100%"},"& .fc-scrollgrid, & .fc-theme-standard td, & .fc-theme-standard th":{borderColor:"".concat(e.palette.divider,"!important")},"&  .fc-scrollgrid-section > td":{border:0},"& .fc-daygrid-day":{"&:last-child":{borderRight:0}},"& .fc-col-header-cell":{borderWidth:"0 0 1px 0",padding:"16px 0","& .fc-col-header-cell-cushion":{color:e.palette.text.secondary,fontWeight:500}},"& .fc-view ":{borderRadius:20,overflow:"hidden",border:"1px solid ".concat(e.palette.divider),"& > .fc-scrollgrid":{border:0}},"& .fc-daygrid-day-number":{color:e.palette.text.secondary,fontWeight:500},"& .fc-event":{backgroundColor:"".concat(e.palette.primary.dark,"!important"),color:"".concat(e.palette.primary.contrastText,"!important"),border:0,padding:"0 6px",borderRadius:"16px!important"}},addButton:{position:"absolute",right:12,top:172,zIndex:99}}}));function ge(e){return Object(k.jsxs)("div",{className:"flex items-center",children:[Object(k.jsx)(l.a,{className:"text-12 font-semibold",children:e.timeText}),Object(k.jsx)(l.a,{className:"text-12 px-4 truncate",children:e.event.title})]})}t.default=Object(s.a)("calendarApp",ve)((function(e){var t=Object(u.useState)(),a=Object(n.a)(t,2),i=a[0],l=a[1],s=Object(b.c)(),v=Object(b.d)(ce),x=Object(u.useRef)(),g=xe(e);return Object(u.useRef)(null),Object(u.useEffect)((function(){s($())}),[s]),Object(k.jsxs)("div",{className:Object(o.a)(g.root,"flex flex-col flex-auto relative"),children:[Object(k.jsx)(E,{calendarRef:x,currentDate:i}),Object(k.jsxs)("div",{className:"flex flex-1 p-24 container",children:[Object(k.jsx)(d.a.div,{className:"w-full",initial:{y:20,opacity:0},animate:{y:0,opacity:1,transition:{delay:.2}},children:Object(k.jsx)(p.a,{plugins:[j.b,m.a,f.a],headerToolbar:!1,initialView:"dayGridMonth",editable:!0,selectable:!0,selectMirror:!0,dayMaxEvents:!0,weekends:!0,datesSet:function(e){l(e)},select:function(e){var t=e.start,a=e.end;s(se({start:t,end:a}))},events:v,eventContent:ge,eventClick:function(e){var t=e.event,a=t.id,n=t.title,r=t.allDay,c=t.start,i=t.end,l=t.extendedProps;s(de({id:a,title:n,allDay:r,start:c,end:i,extendedProps:l}))},eventAdd:function(e){},eventChange:function(e){},eventRemove:function(e){},eventDrop:function(e){var t=e.event,a=t.id,n=t.title,r=t.allDay,c=t.start,i=t.end,l=t.extendedProps;s(te({id:a,title:n,allDay:r,start:c,end:i,extendedProps:l}))},initialDate:new Date(2021,3,1),ref:x})}),Object(k.jsx)(d.a.div,{className:g.addButton,initial:{scale:0},animate:{scale:1,transition:{delay:.4}},children:Object(k.jsx)(r.a,{color:"secondary","aria-label":"add",onClick:function(){return s(se({start:new Date,end:new Date}))},children:Object(k.jsx)(c.a,{children:"add"})})}),Object(k.jsx)(me,{})]})]})}))}}]);